{
  "version": 3,
  "sources": ["src/app/pages/parent-goals.ts"],
  "sourcesContent": ["import { Component, inject, signal, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ParentLayoutComponent } from '../layouts/parent-layout';\nimport { AuthService } from '../services/auth.service';\nimport { FirestoreService } from '../services/firestore.service';\nimport { Goal } from '../models/interfaces';\n\n@Component({\n  selector: 'app-parent-goals',\n  standalone: true,\n  imports: [CommonModule, FormsModule, ParentLayoutComponent],\n  template: `\n    <app-parent-layout>\n      <div class=\"animate-fade-in\">\n        <div class=\"flex items-center justify-between mb-8\">\n          <div>\n            <h1 class=\"text-2xl font-bold font-heading tracking-tight\" data-testid=\"goals-heading\">Goals</h1>\n            <p class=\"text-sm mt-1\" style=\"color: var(--fg-muted)\">Savings goals for {{ auth.selectedKid()?.name }}</p>\n          </div>\n          <button (click)=\"showCreate.set(true)\" class=\"btn-primary text-sm\" data-testid=\"create-goal-btn\">+ New Goal</button>\n        </div>\n\n        @if (goals().length === 0) {\n          <div class=\"card p-12 text-center\"><p class=\"text-sm\" style=\"color: var(--fg-muted)\">No goals yet. Create one to start saving!</p></div>\n        }\n\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          @for (goal of goals(); track goal.id) {\n            <div class=\"card p-6\" [attr.data-testid]=\"'goal-' + goal.id\">\n              <div class=\"flex items-center justify-between mb-3\">\n                <h3 class=\"font-semibold font-heading\">{{ goal.title }}</h3>\n                <span class=\"badge text-[10px]\" [style.background-color]=\"goal.status === 'completed' ? '#34D39920' : '#FCD34D20'\" [style.color]=\"goal.status === 'completed' ? '#34D399' : '#FCD34D'\">{{ goal.status }}</span>\n              </div>\n              <div class=\"w-full rounded-full h-2 mb-2\" style=\"background-color: var(--muted)\">\n                <div class=\"h-2 rounded-full bg-primary transition-all\" [style.width.%]=\"(goal.saved_amount / goal.target_amount) * 100\"></div>\n              </div>\n              <p class=\"text-xs\" style=\"color: var(--fg-muted)\">{{ goal.saved_amount }} / {{ goal.target_amount }} coins ({{ ((goal.saved_amount / goal.target_amount) * 100).toFixed(0) }}%)</p>\n              @if (goal.status === 'active') {\n                <div class=\"flex gap-2 mt-3\">\n                  <input class=\"input flex-1\" type=\"number\" min=\"1\" [placeholder]=\"'Amount'\" [(ngModel)]=\"contributeAmounts[goal.id]\" [attr.data-testid]=\"'contribute-input-' + goal.id\">\n                  <button (click)=\"contribute(goal.id)\" class=\"btn-primary text-xs\" [attr.data-testid]=\"'contribute-btn-' + goal.id\">Save</button>\n                </div>\n              }\n            </div>\n          }\n        </div>\n\n        @if (showCreate()) {\n          <div class=\"fixed inset-0 z-50 flex items-center justify-center p-4\" (click)=\"showCreate.set(false)\">\n            <div class=\"absolute inset-0 bg-black/50\"></div>\n            <div class=\"card p-8 w-full max-w-md relative z-10 animate-fade-in\" (click)=\"$event.stopPropagation()\">\n              <h2 class=\"text-lg font-bold font-heading mb-6\">Create Goal</h2>\n              <form (ngSubmit)=\"createGoal()\" class=\"space-y-4\">\n                <div><label class=\"label\">Goal Title</label><input class=\"input\" placeholder=\"e.g., New bicycle\" [(ngModel)]=\"goalForm.title\" name=\"title\" data-testid=\"goal-title-input\"></div>\n                <div><label class=\"label\">Target Amount (coins)</label><input class=\"input\" type=\"number\" min=\"1\" [(ngModel)]=\"goalForm.target_amount\" name=\"target\" data-testid=\"goal-target-input\"></div>\n                <button type=\"submit\" class=\"btn-primary w-full py-3\" [disabled]=\"creating()\" data-testid=\"submit-goal-btn\">{{ creating() ? 'Creating...' : 'Create Goal' }}</button>\n              </form>\n            </div>\n          </div>\n        }\n      </div>\n    </app-parent-layout>\n  `\n})\nexport class ParentGoalsPage implements OnInit {\n  auth = inject(AuthService);\n  private fs = inject(FirestoreService);\n  goals = signal<Goal[]>([]);\n  showCreate = signal(false);\n  creating = signal(false);\n  goalForm = { title: '', target_amount: 100 };\n  contributeAmounts: Record<string, number> = {};\n\n  async ngOnInit() { await this.load(); }\n\n  async load() {\n    const kid = this.auth.selectedKid();\n    if (!kid) return;\n    this.goals.set(await this.fs.getGoals(kid.id));\n  }\n\n  async createGoal() {\n    if (!this.goalForm.title) return;\n    this.creating.set(true);\n    try {\n      const kid = this.auth.selectedKid();\n      const user = this.auth.firebaseUser();\n      if (!kid || !user) return;\n      await this.fs.createGoal(user.uid, kid.id, this.goalForm);\n      await this.load();\n      this.showCreate.set(false);\n      this.goalForm = { title: '', target_amount: 100 };\n    } finally { this.creating.set(false); }\n  }\n\n  async contribute(goalId: string) {\n    const amount = this.contributeAmounts[goalId];\n    if (!amount || amount <= 0) return;\n    const kid = this.auth.selectedKid();\n    if (!kid) return;\n    try {\n      await this.fs.contributeToGoal(goalId, kid.id, amount);\n      this.contributeAmounts[goalId] = 0;\n      await this.load();\n    } catch (err: any) { alert(err.message); }\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
