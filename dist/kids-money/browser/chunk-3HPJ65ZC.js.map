{
  "version": 3,
  "sources": ["src/app/pages/kid-goals.ts"],
  "sourcesContent": ["import { Component, inject, signal, OnInit, computed } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { KidLayoutComponent } from '../layouts/kid-layout';\nimport { AuthService } from '../services/auth.service';\nimport { FirestoreService } from '../services/firestore.service';\nimport { Goal } from '../models/interfaces';\nimport { KID_THEMES } from '../constants/app-data';\n\n@Component({\n  selector: 'app-kid-goals',\n  standalone: true,\n  imports: [CommonModule, FormsModule, KidLayoutComponent],\n  template: `\n    <app-kid-layout>\n      <div class=\"animate-fade-in\">\n        <h1 class=\"text-2xl font-bold font-heading tracking-tight mb-2\" data-testid=\"kid-goals-heading\">My Goals</h1>\n        <p class=\"text-sm mb-6\" style=\"color: var(--fg-muted)\">Save towards your dreams!</p>\n\n        @if (goals().length === 0) {\n          <div class=\"card p-12 text-center\"><p class=\"text-sm\" style=\"color: var(--fg-muted)\">No goals yet. Ask your parent to set one up!</p></div>\n        }\n\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          @for (goal of goals(); track goal.id) {\n            <div class=\"card p-6\" [attr.data-testid]=\"'kid-goal-' + goal.id\">\n              <h3 class=\"font-semibold font-heading mb-3\">{{ goal.title }}</h3>\n              <div class=\"w-full rounded-full h-3 mb-2\" style=\"background-color: var(--muted)\">\n                <div class=\"h-3 rounded-full transition-all\" [style.width.%]=\"(goal.saved_amount / goal.target_amount) * 100\" [style.background-color]=\"theme().primary\"></div>\n              </div>\n              <p class=\"text-xs mb-3\" style=\"color: var(--fg-muted)\">{{ goal.saved_amount }} / {{ goal.target_amount }} coins</p>\n              @if (goal.status === 'active') {\n                <div class=\"flex gap-2\">\n                  <input class=\"input flex-1\" type=\"number\" min=\"1\" placeholder=\"Amount\" [(ngModel)]=\"amounts[goal.id]\" [attr.data-testid]=\"'kid-contribute-input-' + goal.id\">\n                  <button (click)=\"contribute(goal.id)\" class=\"text-xs px-4 py-2 rounded-full text-white font-medium\" [style.background-color]=\"theme().primary\" [attr.data-testid]=\"'kid-contribute-btn-' + goal.id\">Save</button>\n                </div>\n              } @else {\n                <span class=\"badge text-[10px]\" style=\"background-color: #34D39920; color: #34D399\">Completed!</span>\n              }\n            </div>\n          }\n        </div>\n      </div>\n    </app-kid-layout>\n  `\n})\nexport class KidGoalsPage implements OnInit {\n  auth = inject(AuthService);\n  private fs = inject(FirestoreService);\n  goals = signal<Goal[]>([]);\n  amounts: Record<string, number> = {};\n  theme = computed(() => KID_THEMES[this.auth.kidSession()?.kid?.ui_theme || 'neutral'] || KID_THEMES['neutral']);\n\n  async ngOnInit() {\n    const kid = this.auth.kidSession()?.kid;\n    if (kid) this.goals.set(await this.fs.getGoals(kid.id));\n  }\n\n  async contribute(goalId: string) {\n    const amount = this.amounts[goalId];\n    if (!amount || amount <= 0) return;\n    const kid = this.auth.kidSession()?.kid;\n    if (!kid) return;\n    try { await this.fs.contributeToGoal(goalId, kid.id, amount); this.amounts[goalId] = 0; this.goals.set(await this.fs.getGoals(kid.id)); } catch (e: any) { alert(e.message); }\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
