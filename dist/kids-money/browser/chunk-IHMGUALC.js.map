{
  "version": 3,
  "sources": ["src/app/pages/kid-loans.ts"],
  "sourcesContent": ["import { Component, inject, signal, OnInit, computed } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { KidLayoutComponent } from '../layouts/kid-layout';\nimport { AuthService } from '../services/auth.service';\nimport { FirestoreService } from '../services/firestore.service';\nimport { Loan } from '../models/interfaces';\nimport { KID_THEMES } from '../constants/app-data';\n\n@Component({\n  selector: 'app-kid-loans',\n  standalone: true,\n  imports: [CommonModule, KidLayoutComponent],\n  template: `\n    <app-kid-layout>\n      <div class=\"animate-fade-in\">\n        <h1 class=\"text-2xl font-bold font-heading tracking-tight mb-2\" data-testid=\"kid-loans-heading\">My Loans</h1>\n        <p class=\"text-sm mb-6\" style=\"color: var(--fg-muted)\">Manage your borrowings responsibly</p>\n\n        @if (loans().length === 0) {\n          <div class=\"card p-12 text-center\"><p class=\"text-sm\" style=\"color: var(--fg-muted)\">No loans yet. That's great!</p></div>\n        }\n\n        <div class=\"space-y-4\">\n          @for (loan of loans(); track loan.id) {\n            <div class=\"card p-6\" [attr.data-testid]=\"'kid-loan-' + loan.id\">\n              <div class=\"flex items-center justify-between mb-3\">\n                <div>\n                  <p class=\"font-semibold font-heading\">{{ loan.purpose }}</p>\n                  <p class=\"text-xs\" style=\"color: var(--fg-muted)\">{{ loan.interest_rate }}% interest &middot; {{ loan.duration_months }} months</p>\n                </div>\n                <span class=\"badge text-[10px]\" [style.background-color]=\"loan.status === 'active' ? theme().primary + '15' : loan.status === 'completed' ? '#34D39920' : '#FCD34D20'\" [style.color]=\"loan.status === 'active' ? theme().primary : loan.status === 'completed' ? '#34D399' : '#FCD34D'\">{{ loan.status }}</span>\n              </div>\n              @if (loan.status !== 'pending') {\n                <div class=\"grid grid-cols-2 gap-2 text-center mb-3\">\n                  <div class=\"p-2 rounded-xl\" style=\"background-color: var(--muted)\"><p class=\"text-[10px]\" style=\"color: var(--fg-muted)\">Remaining</p><p class=\"text-sm font-bold\">{{ loan.remaining_balance }}</p></div>\n                  <div class=\"p-2 rounded-xl\" style=\"background-color: var(--muted)\"><p class=\"text-[10px]\" style=\"color: var(--fg-muted)\">Payments</p><p class=\"text-sm font-bold\">{{ loan.payments_made }}/{{ loan.duration_months }}</p></div>\n                </div>\n              }\n              @if (loan.status === 'active') {\n                <button (click)=\"payEMI(loan)\" class=\"btn-primary w-full text-xs py-2\" [attr.data-testid]=\"'kid-pay-emi-' + loan.id\">Pay EMI ({{ loan.emi_amount }} coins)</button>\n              }\n            </div>\n          }\n        </div>\n      </div>\n    </app-kid-layout>\n  `\n})\nexport class KidLoansPage implements OnInit {\n  auth = inject(AuthService);\n  private fs = inject(FirestoreService);\n  loans = signal<Loan[]>([]);\n  theme = computed(() => KID_THEMES[this.auth.kidSession()?.kid?.ui_theme || 'neutral'] || KID_THEMES['neutral']);\n\n  async ngOnInit() {\n    const kid = this.auth.kidSession()?.kid;\n    if (kid) this.loans.set(await this.fs.getLoans(kid.id));\n  }\n\n  async payEMI(loan: Loan) {\n    const kid = this.auth.kidSession()?.kid;\n    if (!kid) return;\n    try { await this.fs.payLoanEMI(loan.id, kid.id); this.loans.set(await this.fs.getLoans(kid.id)); } catch (e: any) { alert(e.message); }\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
