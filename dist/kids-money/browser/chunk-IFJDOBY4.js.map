{
  "version": 3,
  "sources": ["src/app/pages/parent-learning.ts"],
  "sourcesContent": ["import { Component, inject, signal, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ParentLayoutComponent } from '../layouts/parent-layout';\nimport { AuthService } from '../services/auth.service';\nimport { FirestoreService } from '../services/firestore.service';\nimport { STORIES } from '../constants/app-data';\n\n@Component({\n  selector: 'app-parent-learning',\n  standalone: true,\n  imports: [CommonModule, ParentLayoutComponent],\n  template: `\n    <app-parent-layout>\n      <div class=\"animate-fade-in\">\n        <h1 class=\"text-2xl font-bold font-heading tracking-tight mb-2\" data-testid=\"learning-heading\">Learning</h1>\n        <p class=\"text-sm mb-8\" style=\"color: var(--fg-muted)\">Financial stories and quizzes for {{ auth.selectedKid()?.name }}</p>\n\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          @for (story of stories; track story.id) {\n            <div class=\"card p-6 cursor-pointer transition-all hover:scale-[1.02]\" (click)=\"selectedStory.set(story)\" [attr.data-testid]=\"'story-' + story.id\">\n              <div class=\"flex items-center gap-3 mb-3\">\n                <div class=\"w-10 h-10 rounded-xl flex items-center justify-center\" style=\"background-color: color-mix(in srgb, var(--color-primary) 10%, transparent)\">\n                  <svg class=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z\" stroke-width=\"2\"/><path d=\"M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z\" stroke-width=\"2\"/></svg>\n                </div>\n                <div class=\"flex-1\">\n                  <h3 class=\"font-semibold font-heading text-sm\">{{ story.title }}</h3>\n                  <p class=\"text-xs\" style=\"color: var(--fg-muted)\">{{ story.category }} &middot; {{ story.reward_xp }} XP</p>\n                </div>\n                @if (isCompleted(story.id)) {\n                  <span class=\"badge text-[10px]\" style=\"background-color: #34D39920; color: #34D399\">Done</span>\n                }\n              </div>\n              <p class=\"text-xs\" style=\"color: var(--fg-muted)\">{{ story.description }}</p>\n            </div>\n          }\n        </div>\n\n        @if (selectedStory(); as story) {\n          <div class=\"fixed inset-0 z-50 flex items-center justify-center p-4\" (click)=\"selectedStory.set(null)\">\n            <div class=\"absolute inset-0 bg-black/50\"></div>\n            <div class=\"card p-8 w-full max-w-lg relative z-10 max-h-[90vh] overflow-y-auto animate-fade-in\" (click)=\"$event.stopPropagation()\">\n              <h2 class=\"text-lg font-bold font-heading mb-4\">{{ story.title }}</h2>\n              <p class=\"text-sm leading-relaxed mb-6\" style=\"color: var(--fg-muted)\">{{ story.content }}</p>\n\n              @if (!quizMode()) {\n                <button (click)=\"quizMode.set(true)\" class=\"btn-primary w-full py-3\">Take Quiz</button>\n              } @else {\n                <div class=\"space-y-4\">\n                  @for (q of story.questions; track $index; let i = $index) {\n                    <div class=\"p-4 rounded-xl\" style=\"background-color: var(--muted)\">\n                      <p class=\"text-sm font-medium mb-2\">{{ i + 1 }}. {{ q.question }}</p>\n                      <div class=\"grid grid-cols-2 gap-2\">\n                        @for (opt of q.options; track $index; let j = $index) {\n                          <button (click)=\"answers[i] = j\"\n                                  [ngClass]=\"answers[i] === j ? 'bg-primary text-white' : ''\"\n                                  class=\"text-xs p-2 rounded-xl border transition-all\"\n                                  [style.border-color]=\"answers[i] === j ? '' : 'var(--border)'\">{{ opt }}</button>\n                        }\n                      </div>\n                    </div>\n                  }\n                  <button (click)=\"submitQuiz(story)\" class=\"btn-primary w-full py-3\" [disabled]=\"submitting()\">Submit Quiz</button>\n                  @if (quizResult()) {\n                    <div class=\"p-4 rounded-xl text-center\" style=\"background-color: var(--muted)\">\n                      <p class=\"text-sm font-bold\">Score: {{ quizResult() }}/{{ story.questions.length }}</p>\n                    </div>\n                  }\n                </div>\n              }\n            </div>\n          </div>\n        }\n      </div>\n    </app-parent-layout>\n  `\n})\nexport class ParentLearningPage implements OnInit {\n  auth = inject(AuthService);\n  private fs = inject(FirestoreService);\n  stories = STORIES;\n  completedIds = signal<string[]>([]);\n  selectedStory = signal<any>(null);\n  quizMode = signal(false);\n  submitting = signal(false);\n  quizResult = signal<number | null>(null);\n  answers: Record<number, number> = {};\n\n  async ngOnInit() {\n    const kid = this.auth.selectedKid();\n    if (kid) {\n      const progress = await this.fs.getLearningProgress(kid.id);\n      this.completedIds.set(progress.map(p => p.story_id));\n    }\n  }\n\n  isCompleted(id: string) { return this.completedIds().includes(id); }\n\n  async submitQuiz(story: any) {\n    const kid = this.auth.selectedKid();\n    if (!kid) return;\n    this.submitting.set(true);\n    try {\n      let score = 0;\n      story.questions.forEach((q: any, i: number) => { if (this.answers[i] === q.correct) score++; });\n      await this.fs.completeLesson(kid.id, story.id, score, story.reward_xp);\n      this.quizResult.set(score);\n      this.completedIds.update(ids => [...ids, story.id]);\n    } finally { this.submitting.set(false); }\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
